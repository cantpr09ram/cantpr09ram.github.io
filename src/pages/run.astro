---
import strava from "../data/strava.json";
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import FormattedDate from "../components/FormattedDate.astro";
const lastRuns = Array.isArray(strava.last_20) ? strava.last_20 : [];
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title="Run Stats" description="Strava running stats" />
  </head>
  <body class="antialiased tracking-tight">
      <div class="min-h-screen flex flex-col justify-between pt-10 md:pt-8 p-8 dark:bg-zinc-950 bg-white text-gray-900 dark:text-zinc-200">
      <main class="max-w-[60ch] mx-auto w-full">
        <Header />
        <section class="pl-2 pb-20">
            <div class="pt-6 items-center justify-center text-lg">
                <div class="font-bold">
                   This Year: {strava.total_km} {strava.unit}
                </div>
            </div>
            {lastRuns.length > 0 ? (
              <div class="pt-8">
                <ul class="mt-4 space-y-3">
                  {lastRuns.map((run) => (
                    <li class="flex items-start justify-between gap-4 border-zinc-200/60 pb-3 dark:border-zinc-800">
                      <div class="flex flex-col gap-1">
                        <div class="text-sm text-gray-500 dark:text-zinc-400">
                          <FormattedDate date={new Date(run.date_iso ?? run.date)} />
                        </div>
                      </div>
                      <div class="shrink-0 font-mono text-sm">
                        {Number(run.distance_km).toFixed(2)} {strava.unit}
                      </div>
                    </li>
                  ))}
                </ul>
              </div>
            ) : null}
        </section>
        <Footer />
      </main>
    </div>
  </body>
</html>
