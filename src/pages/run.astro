---
import strava from "../data/strava.json";
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import FormattedDate from "../components/FormattedDate.astro";
import ThemeToggle from "../components/ThemeToggle.astro";
const lastRuns = Array.isArray(strava.last_20) ? strava.last_20 : [];
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title="Run" description="Running Stats" />
  </head>
  <body class="antialiased tracking-tight">
      <ThemeToggle />
      <div class="min-h-screen flex flex-col justify-between pt-10 md:pt-8 p-8 bg-[var(--app-bg)] text-[var(--app-text)]">
      <main class="max-w-[var(--layout-main-max)] mx-auto w-full">
        <Header />
        <section class="pl-2 pb-20">
            <div class="pt-6 items-center justify-center text-lg">
                <div class="font-bold">
                   This Year: {strava.total_km} {strava.unit}
                </div>
            </div>
            {lastRuns.length > 0 ? (
              <div class="pt-8 max-w-[var(--layout-narrow-max)]">
                <ul class="mt-2 space-y-1">
                  {lastRuns.map((run) => (
                    <li class="flex items-start justify-between gap-2 border-zinc-200/60 dark:border-zinc-800">
                      <div class="flex flex-col">
                        <div class="text-sm text-[var(--app-text-muted)]">
                          <FormattedDate date={new Date(run.date_iso ?? run.date)} />
                        </div>
                      </div>
                      <div class="shrink-0 font-mono text-sm">
                        {Number(run.distance_km).toFixed(2)} {strava.unit}
                      </div>
                    </li>
                  ))}
                </ul>
              </div>
            ) : null}
        </section>
        <Footer />
      </main>
    </div>
  </body>
</html>
